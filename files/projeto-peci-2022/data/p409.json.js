window.repositoryObject = {"parameters_custom_fields":[],"object_id":"p409","name":"spCreateInstructor","subtype":"PROCEDURE","is_user_defined":false,"description":"<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\r\n\t<head>\r\n\t\t<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" /><title>\r\n\t\t</title>\r\n\t\t<style type=\"text/css\">\r\n\t\t\t.cs2654AE3A{text-align:left;text-indent:0pt;margin:0pt 0pt 0pt 0pt}\r\n\t\t\t.cs416E45A4{color:#000000;background-color:transparent;font-family:'Segoe UI';font-size:10pt;font-weight:normal;font-style:normal;}\r\n\t\t</style>\r\n\t</head>\r\n\t<body>\r\n\t\t<p class=\"cs2654AE3A\"><span class=\"cs416E45A4\">Creates an Instructor</span></p></body>\r\n</html>\r\n","summary":[{"field":"Documentation","value":{"_type":"link","name":"Projeto PECI 2022","id":"d11"}},{"field":"Schema","value":""},{"field":"Name","value":"spCreateInstructor"},{"field":"Type","value":"Procedure"}],"script":"BEGIN\r\n\tSTART TRANSACTION;\r\n\t\tINSERT INTO PECI_PROJ.SysUser (email, firstName, lastName, birthdate, sex, street, postCode, city, country) VALUES (AES_ENCRYPT(INinstructorEmail, dbKey), AES_ENCRYPT(INfirstName, dbKey), AES_ENCRYPT(INlastName, dbKey), INbirthdate, INsex, AES_ENCRYPT(INstreet, dbKey), AES_ENCRYPT(INpostCode, dbKey), AES_ENCRYPT(INcity, dbKey), AES_ENCRYPT(INcountry, dbKey));\r\n\t\tSELECT userID INTO @iID FROM (SELECT userID, email FROM PECI_PROJ.SysUser) AS t1 WHERE CONVERT(AES_DECRYPT(t1.email, dbKey) USING UTF8MB4) = INinstructorEmail;\r\n        IF(INmaxClients = 0 OR INmaxClients IS NULL) THEN\r\n\t\t\tIF(INaboutMe = \"\" OR INaboutMe IS NULL) THEN\r\n\t\t\t\tINSERT INTO PECI_PROJ.SysInstructor (instructorID, firebaseID, contactNumber, paypalAccount) VALUES (@iID, AES_ENCRYPT(INfirebaseID, dbKey), AES_ENCRYPT(INcontactNumber, dbKey), AES_ENCRYPT(INpaypalAccount, dbKey));\r\n\t\t\tELSE\r\n\t\t\t\tINSERT INTO PECI_PROJ.SysInstructor (instructorID, firebaseID, contactNumber, paypalAccount, aboutMe) VALUES (@iID, AES_ENCRYPT(INfirebaseID, dbKey), AES_ENCRYPT(INcontactNumber, dbKey), AES_ENCRYPT(INpaypalAccount, dbKey), INaboutMe);\r\n\t\t\tEND IF;\r\n        ELSE\r\n\t\t\tIF(INaboutMe = \"\" OR INaboutMe IS NULL) THEN\r\n\t\t\t\tINSERT INTO PECI_PROJ.SysInstructor (instructorID, firebaseID, contactNumber, paypalAccount, maxClients) VALUES (@iID, AES_ENCRYPT(INfirebaseID, dbKey), AES_ENCRYPT(INcontactNumber, dbKey), AES_ENCRYPT(INpaypalAccount, dbKey), INmaxClients);\r\n\t\t\tELSE\r\n\t\t\t\tINSERT INTO PECI_PROJ.SysInstructor VALUES (@iID, AES_ENCRYPT(INfirebaseID, dbKey) ,AES_ENCRYPT(INcontactNumber, dbKey), AES_ENCRYPT(INpaypalAccount, dbKey), INmaxClients, INaboutMe); \r\n\t\t\tEND IF;\r\n\t\tEND IF;\r\n    COMMIT;\r\nEND","parameters":[{"name":"INinstructorEmail","description":null,"mode":"IN","data_type":"varchar(255)","custom_fields":{}},{"name":"INfirebaseID","description":null,"mode":"IN","data_type":"varchar(255)","custom_fields":{}},{"name":"INfirstName","description":null,"mode":"IN","data_type":"varchar(255)","custom_fields":{}},{"name":"INlastName","description":null,"mode":"IN","data_type":"varchar(255)","custom_fields":{}},{"name":"INbirthdate","description":null,"mode":"IN","data_type":"date","custom_fields":{}},{"name":"INsex","description":null,"mode":"IN","data_type":"varchar(32)","custom_fields":{}},{"name":"INstreet","description":null,"mode":"IN","data_type":"varchar(255)","custom_fields":{}},{"name":"INpostCode","description":null,"mode":"IN","data_type":"varchar(255)","custom_fields":{}},{"name":"INcity","description":null,"mode":"IN","data_type":"varchar(255)","custom_fields":{}},{"name":"INcountry","description":null,"mode":"IN","data_type":"varchar(255)","custom_fields":{}},{"name":"INcontactNumber","description":null,"mode":"IN","data_type":"varchar(255)","custom_fields":{}},{"name":"INpaypalAccount","description":null,"mode":"IN","data_type":"varchar(255)","custom_fields":{}},{"name":"INmaxClients","description":null,"mode":"IN","data_type":"int(10, 0)","custom_fields":{}},{"name":"INaboutMe","description":null,"mode":"IN","data_type":"varchar(255)","custom_fields":{}},{"name":"dbKey","description":null,"mode":"IN","data_type":"varchar(255)","custom_fields":{}}],"dependencies":{"uses":[],"used_by":[]},"imported_at":"2022-06-25 21:00"};